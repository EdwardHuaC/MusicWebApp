{"remainingRequest":"/Users/conghua/Study/Projects/Vue_CloudMusic/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/conghua/Study/Projects/Vue_CloudMusic/src/components/findMusic/musicList/MusicListPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/conghua/Study/Projects/Vue_CloudMusic/src/components/findMusic/musicList/MusicListPage.vue","mtime":1613060486000},{"path":"/Users/conghua/Study/Projects/Vue_CloudMusic/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/conghua/Study/Projects/Vue_CloudMusic/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/conghua/Study/Projects/Vue_CloudMusic/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/conghua/Study/Projects/Vue_CloudMusic/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgLy/nsr7lk4HmrYzljZXliIbnsbvmn6Xor6LmnaHku7YKICAgICAgICAgICAgcXVlcnlJbmZvOiB7CiAgICAgICAgICAgICAgICBjYXQ6ICflhajpg6gnLAogICAgICAgICAgICAgICAgbGltaXQ6IDI0LAogICAgICAgICAgICAgICAgb2Zmc2V0OiAwLAogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+eDremXqOatjOWNleWIhuexu+agh+etvgogICAgICAgICAgICBob3RNdXNpY0xpc3RUYWdzOiBbXSwKICAgICAgICAgICAgLy/nsr7lk4HmrYzljZXnmoTliJfooagKICAgICAgICAgICAgZ29vZE11c2ljTGlzdDogW10sCiAgICAgICAgICAgIC8v57K+5ZOB5q2M5Y2V55qE5oC75pWwCiAgICAgICAgICAgIGdvb2RNdXNpY0xpc3RUb3RhbDogMCwKICAgICAgICAgICAgLy/kuIrkuIDmrKHooqvngrnlh7vov4fnmoTliIbnsbvmoIfnrb4KICAgICAgICAgICAgcHJldkNsaWNrQ2F0OiAnJwogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIC8v6I635Y+W54Ot6Zeo5q2M5Y2V5qCH562+5L+h5oGvCiAgICAgICAgdGhpcy5nZXRIb3RNdXNpY0xpc3RUYWdzKCkKICAgICAgICAvL+iOt+WPlueyvuWTgeatjOWNlQogICAgICAgIHRoaXMuZ2V0R29vZE11c2ljTGlzdCgpCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8v6I635Y+W54Ot6Zeo5q2M5Y2V5qCH562+5L+h5oGvCiAgICAgICAgZ2V0SG90TXVzaWNMaXN0VGFncygpIHsKICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoJ3BsYXlsaXN0L2hvdCcpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuaG90TXVzaWNMaXN0VGFncyA9IHJlcy5kYXRhLnRhZ3MKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8v6I635Y+W57K+5ZOB5q2M5Y2VCiAgICAgICAgZ2V0R29vZE11c2ljTGlzdCgpIHsKICAgICAgICAgICAgdGhpcy4kaHR0cC5nZXQoJy90b3AvcGxheWxpc3QnLCB7cGFyYW1zOiB0aGlzLnF1ZXJ5SW5mb30pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuZ29vZE11c2ljTGlzdCA9IHJlcy5kYXRhLnBsYXlsaXN0cwogICAgICAgICAgICAgICAgdGhpcy5nb29kTXVzaWNMaXN0VG90YWwgPSByZXMuZGF0YS50b3RhbAogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy/liIbpobXmj5Lku7bpobXmlbDmlLnlj5gKICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgICAgICAgdGhpcy5xdWVyeUluZm8ub2Zmc2V0ID0gKG5ld1BhZ2UgLSAxKSAqIHRoaXMucXVlcnlJbmZvLmxpbWl0CiAgICAgICAgICAgIHRoaXMuZ2V0R29vZE11c2ljTGlzdCgpOwogICAgICAgIH0sCiAgICAgICAgLy/ngrnlh7vmrYzljZXot7PovaznlYzpnaIKICAgICAgICB0b1NvbmdMaXN0UGFnZShpZCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3NvbmdsaXN0LycgKyBpZCkKICAgICAgICB9LAogICAgICAgIC8v54K55Ye75qCH562+562b6YCJKGluZGV4K2pxdWVyeei+heWKqeaIkeS7rOWIh+aNoueCueWHu+WQjueahOaWh+acrOeahOagt+W8jykKICAgICAgICBjaGFuZ2VNdXNpY0xpc3RDYXQobmV3Q2F0LGluZGV4KSB7CiAgICAgICAgICAgIC8v6K+05piO5piv54K55Ye75LiK5LiA5qyh6YCJ5Lit55qE5qCH562+LOaJgOS7peWPlua2iOafpeivouS/oeaBrwogICAgICAgICAgICBpZiAodGhpcy5wcmV2Q2xpY2tDYXQgPT09ICdjYXQnK2luZGV4KXsKICAgICAgICAgICAgICAgIHRoaXMuJCgnLmFjdGl2ZUNhdCcpLmVxKDApLmF0dHIoJ2NsYXNzJyx0aGlzLnByZXZDbGlja0NhdCk7CiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5SW5mby5jYXQgPSAn5YWo6YOoJwogICAgICAgICAgICAgICAgdGhpcy5nZXRHb29kTXVzaWNMaXN0KCkKICAgICAgICAgICAgfQogICAgICAgICAgICAvL+iuvue9ruafpeivouadoeS7tueahOagh+etvuetm+mAiQogICAgICAgICAgICB0aGlzLnF1ZXJ5SW5mby5jYXQgPSBuZXdDYXQKICAgICAgICAgICAgLy/ov5jljp/kuIrkuIDkuKrooqvngrnlh7vmoIfnrb7nmoTnsbvlkI0KICAgICAgICAgICAgdGhpcy4kKCcuYWN0aXZlQ2F0JykuZXEoMCkuYXR0cignY2xhc3MnLHRoaXMucHJldkNsaWNrQ2F0KTsKICAgICAgICAgICAgLy/pmLLmraLlpJrkuKrmoIfnrb7pq5jkuq4o6K6+572u5LiK5LiA5Liq6KKr54K55Ye755qE5qCH562+55qEbmFtZeWxnuaApyDku6Xkvr/kuo7ov5jljp8pCiAgICAgICAgICAgIGlmICh0aGlzLnByZXZDbGlja0NhdCAhPT0gJ2NhdCcraW5kZXgpIHsKICAgICAgICAgICAgICAgIHRoaXMucHJldkNsaWNrQ2F0ID0gJ2NhdCcraW5kZXgKICAgICAgICAgICAgfQogICAgICAgICAgICAvL+iuvue9ruaWsOiiq+eCueWHu+eahOagh+etvueahOexu+WQjQogICAgICAgICAgICB0aGlzLiQoJy5jYXQnK2luZGV4KS5hdHRyKCdjbGFzcycsJ2FjdGl2ZUNhdCcpCiAgICAgICAgICAgIHRoaXMuZ2V0R29vZE11c2ljTGlzdCgpCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["MusicListPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MusicListPage.vue","sourceRoot":"src/components/findMusic/musicList","sourcesContent":["<template>\n    <el-container style=\"margin-bottom: 55px;\">\n        <el-header>\n            <p>\n                热门标签:\n                <span id=\"cats\" v-for=\"(item,index) in hotMusicListTags\" :class=\"'cat'+index\" @click=\"changeMusicListCat(item.name,index)\"\n                      style=\"margin-left: 25px;cursor: pointer;\">{{item.name}}</span>\n            </p>\n        </el-header>\n\n        <el-main>\n\n            <el-row :gutter=\"10\">\n\n                <el-col :span=\"4\" v-for=\"(item,index) in goodMusicList\" style=\"margin-top: 20px;position:relative;\"\n                        :key=\"index\">\n\n                    <!--播放量-->\n                    <div style=\"background: rgba(128,128,128,0.2);color: white;\n                                    width: 96%;position:absolute;z-index: 10;\">\n                        <div style=\"float:right;\">\n                            <i class=\"el-icon-headset\" style=\"margin-right: 5px;\"></i>\n                            {{item.playCount >= 10000 ? (item.playCount/10000).toFixed(0)+'万' : item.playCount}}\n                        </div>\n\n                    </div>\n\n                    <div>\n                        <el-image :src=\"item.coverImgUrl\" @click=\"toSongListPage(item.id)\"\n                                  style=\"box-shadow: 0 0 2px 2px gray;border-radius: 10px;cursor: pointer\">\n                        </el-image>\n                    </div>\n\n\n                    <h1 @click=\"toSongListPage(item.id)\" style=\"cursor:pointer;\">{{item.name}}</h1>\n\n                </el-col>\n            </el-row>\n            <!--分页-->\n            <el-pagination\n                    layout=\"prev, pager, next\"  :page-size=\"queryInfo.limit\"\n                    :total=\"goodMusicListTotal\" @current-change=\"handleCurrentChange\">\n            </el-pagination>\n\n        </el-main>\n    </el-container>\n\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n                //精品歌单分类查询条件\n                queryInfo: {\n                    cat: '全部',\n                    limit: 24,\n                    offset: 0,\n                },\n                //热门歌单分类标签\n                hotMusicListTags: [],\n                //精品歌单的列表\n                goodMusicList: [],\n                //精品歌单的总数\n                goodMusicListTotal: 0,\n                //上一次被点击过的分类标签\n                prevClickCat: ''\n            }\n        },\n        created() {\n            //获取热门歌单标签信息\n            this.getHotMusicListTags()\n            //获取精品歌单\n            this.getGoodMusicList()\n        },\n        methods: {\n            //获取热门歌单标签信息\n            getHotMusicListTags() {\n                this.$http.get('playlist/hot').then(res => {\n                    this.hotMusicListTags = res.data.tags\n                })\n            },\n            //获取精品歌单\n            getGoodMusicList() {\n                this.$http.get('/top/playlist', {params: this.queryInfo}).then(res => {\n                    this.goodMusicList = res.data.playlists\n                    this.goodMusicListTotal = res.data.total\n                })\n            },\n            //分页插件页数改变\n            handleCurrentChange(newPage) {\n                this.queryInfo.offset = (newPage - 1) * this.queryInfo.limit\n                this.getGoodMusicList();\n            },\n            //点击歌单跳转界面\n            toSongListPage(id) {\n                this.$router.push('/songlist/' + id)\n            },\n            //点击标签筛选(index+jquery辅助我们切换点击后的文本的样式)\n            changeMusicListCat(newCat,index) {\n                //说明是点击上一次选中的标签,所以取消查询信息\n                if (this.prevClickCat === 'cat'+index){\n                    this.$('.activeCat').eq(0).attr('class',this.prevClickCat);\n                    this.queryInfo.cat = '全部'\n                    this.getGoodMusicList()\n                }\n                //设置查询条件的标签筛选\n                this.queryInfo.cat = newCat\n                //还原上一个被点击标签的类名\n                this.$('.activeCat').eq(0).attr('class',this.prevClickCat);\n                //防止多个标签高亮(设置上一个被点击的标签的name属性 以便于还原)\n                if (this.prevClickCat !== 'cat'+index) {\n                    this.prevClickCat = 'cat'+index\n                }\n                //设置新被点击的标签的类名\n                this.$('.cat'+index).attr('class','activeCat')\n                this.getGoodMusicList()\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    [class*=el-col-] {\n        display: inline-block;\n        float: none;\n    }\n\n    h1 {\n        font-weight: 500;\n    }\n\n    #cats:hover {\n        color: red\n    }\n\n    /*被点击的分类标签类名变成这个*/\n    .activeCat{\n        color: red;\n    }\n</style>\n"]}]}